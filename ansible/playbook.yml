- name: Configure VM and set up services
  hosts: 51.136.34.167
  become: true
  gather_facts: true

  tasks:
    - name: Ping the host
      ansible.builtin.ping:

- name: Configure common settings
  hosts: all
  become: true
  gather_facts: true

  roles:
    - common

- name: Configure Docker
  hosts: all
  become: true

  roles:
    - docker

- name: Configure Keycloak
  hosts: all
  become: true

  roles:
    - keycloak

- name: Configure Nginx
  hosts: webservers
  become: true

  roles:
    - webserver