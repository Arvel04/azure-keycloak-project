---
- name: Set up container environment
  hosts: webserver
  become: true
  gather_facts: false  # Désactivation de la collecte automatique

  vars:
    ansible_python_interpreter: /usr/bin/python3.9  # Spécifiez la version de Python

  roles:
    - common
    - docker
    - keycloak
    - webserver

  tasks:
    - name: Collect Ansible facts manually
      ansible.builtin.setup:  # Utilise le module standard pour la collecte des faits
        gather_subset:
          - all
